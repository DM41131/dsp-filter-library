<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Source Modules</title>
</head>
<body>
    <h1>Testing Source Modules</h1>
    <div id="output"></div>

    <script type="module">
        import { ComplexNum, C, Util, IIRDesigner, ZDomain } from '../../src/index.js';
        
        const output = document.getElementById('output');
        
        try {
            // Test ComplexNum
            const c1 = ComplexNum.of(3, 4);
            const c2 = ComplexNum.of(1, 2);
            const sum = ComplexNum.add(c1, c2);
            const abs = ComplexNum.abs(c1);
            
            output.innerHTML += `<p>ComplexNum test: (3+4i) + (1+2i) = ${sum.re}+${sum.im}i</p>`;
            output.innerHTML += `<p>ComplexNum abs: |3+4i| = ${abs}</p>`;
            
            // Test Util
            const linspace = Util.linspace(0, 10, 5);
            output.innerHTML += `<p>Util linspace: [0, 10] with 5 points = [${linspace.join(', ')}]</p>`;
            
            // Test IIRDesigner
            const filter = IIRDesigner.butterworth('lowpass', 1000, 44100, 4);
            output.innerHTML += `<p>IIRDesigner test: Filter designed with ${filter.b.length} b coefficients and ${filter.a.length} a coefficients</p>`;
            
            // Test ZDomain
            const freqz = ZDomain.freqz(filter.b, filter.a, 64);
            output.innerHTML += `<p>ZDomain test: Frequency response calculated with ${freqz.mag.length} points</p>`;
            
            output.innerHTML += `<p style="color: green; font-weight: bold;">✅ All source modules loaded and working correctly!</p>`;
            
        } catch (error) {
            output.innerHTML += `<p style="color: red; font-weight: bold;">❌ Error: ${error.message}</p>`;
            console.error('Test error:', error);
        }
    </script>
</body>
</html>
