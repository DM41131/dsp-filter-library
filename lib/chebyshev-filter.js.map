{"version":3,"file":"chebyshev-filter.js","sources":["../src/chebyshev-filter.js"],"sourcesContent":["// chebyshev-filter.js â€” Chebyshev Type I IIR design\n// Author: Davit Akobia <dav.akobia@gmail.com>\n// License: MIT\n\nimport { ComplexNum as C } from './complex.js';\nimport { BaseIIRFilter } from './base-iir-filter.js';\n\n/**\n * Chebyshev Type I (equiripple in passband) analog prototype -> digital\n * @typedef {\"lowpass\"|\"highpass\"|\"bandpass\"|\"bandstop\"} FilterKind\n */\nexport class ChebyshevFilter {\n  /**\n   * @param {FilterKind} kind\n   * @param {number|number[]} cutoffHz\n   * @param {number} fs\n   * @param {number} order\n   * @param {number} rp Passband ripple (dB), e.g. 1\n   */\n  static design(kind, cutoffHz, fs, order = 4, rp = 1) {\n    if (order < 1) throw new Error('Chebyshev-I order must be >= 1');\n    const eps = Math.sqrt(Math.pow(10, rp / 10) - 1);\n    const asinh = (x) => Math.log(x + Math.sqrt(x * x + 1));\n    const alpha = asinh(1 / eps) / order;\n\n    const p = [];\n    for (let k = 1; k <= order; k++) {\n      const theta = Math.PI * (2 * k - 1) / (2 * order);\n      const sigma = -Math.sinh(alpha) * Math.sin(theta);\n      const omega =  Math.cosh(alpha) * Math.cos(theta);\n      p.push({ re: sigma, im: omega });\n    }\n    const z = []; // no finite zeros for Type I\n    const k = 1;\n    return BaseIIRFilter.realize(kind, cutoffHz, fs, { z, p, k });\n  }\n}\nexport default ChebyshevFilter;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;AAKA;AACA;AACA;AACA;AACO,MAAM,eAAe,CAAC;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,KAAK,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE;AACvD,IAAI,IAAI,KAAK,GAAG,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC;AACpE,IAAI,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;AACpD,IAAI,MAAM,KAAK,GAAG,CAAC,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAC3D,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,KAAK;;AAExC,IAAI,MAAM,CAAC,GAAG,EAAE;AAChB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,EAAE,EAAE;AACrC,MAAM,MAAM,KAAK,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;AACvD,MAAM,MAAM,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;AACvD,MAAM,MAAM,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;AACvD,MAAM,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC;AACtC,IAAI;AACJ,IAAI,MAAM,CAAC,GAAG,EAAE,CAAC;AACjB,IAAI,MAAM,CAAC,GAAG,CAAC;AACf,IAAI,OAAO,aAAa,CAAC,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACjE,EAAE;AACF;;;;"}