{"version":3,"file":"complex.js","sources":["../src/complex.js"],"sourcesContent":["// complex.js â€” Complex number operations for DSP\r\n// Author: Davit Akobia <dav.akobia@gmail.com>\r\n// License: MIT\r\n\r\n/**\r\n * @typedef {{re:number, im:number}} Complex\r\n */\r\n\r\n/**\r\n * Complex number operations for digital signal processing\r\n */\r\nexport class ComplexNum {\r\n    /** @returns {Complex} */ \r\n    static of(re = 0, im = 0) { \r\n        return { re, im }; \r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static add(a, b) { \r\n        return { re: a.re + b.re, im: a.im + b.im }; \r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static sub(a, b) { \r\n        return { re: a.re - b.re, im: a.im - b.im }; \r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static mul(a, b) { \r\n        return { re: a.re * b.re - a.im * b.im, im: a.re * b.im + a.im * b.re }; \r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static scale(a, s) { \r\n        return { re: a.re * s, im: a.im * s }; \r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static conj(a) { \r\n        return { re: a.re, im: -a.im }; \r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static div(a, b) {\r\n        const d = b.re*b.re + b.im*b.im || 1e-300;\r\n        return { re: (a.re*b.re + a.im*b.im)/d, im: (a.im*b.re - a.re*b.im)/d };\r\n    }\r\n    \r\n    /** @returns {number} */ \r\n    static abs(a) { \r\n        return Math.hypot(a.re, a.im); \r\n    }\r\n    \r\n    /** @returns {number} */ \r\n    static arg(a) { \r\n        return Math.atan2(a.im, a.re); \r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static expj(theta) { \r\n        return { re: Math.cos(theta), im: Math.sin(theta) }; \r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static pow(a, n) {\r\n        if (n === 0) return { re: 1, im: 0 };\r\n        if (n === 1) return a;\r\n        if (n === -1) return C.div({ re: 1, im: 0 }, a);\r\n        \r\n        if (n > 0) {\r\n            let result = { re: 1, im: 0 };\r\n            for (let i = 0; i < n; i++) {\r\n                result = C.mul(result, a);\r\n            }\r\n            return result;\r\n        } else {\r\n            // For negative powers, use 1/a^n\r\n            let result = { re: 1, im: 0 };\r\n            for (let i = 0; i < -n; i++) {\r\n                result = C.mul(result, a);\r\n            }\r\n            return C.div({ re: 1, im: 0 }, result);\r\n        }\r\n    }\r\n    \r\n    /** @returns {Complex} */ \r\n    static sqrt(a) {\r\n        const r = Math.sqrt(C.abs(a));\r\n        const theta = Math.atan2(a.im, a.re) / 2;\r\n        return { re: r * Math.cos(theta), im: r * Math.sin(theta) };\r\n    }\r\n}\r\n\r\n// Legacy alias for backward compatibility\r\nexport const C = ComplexNum;\r\n"],"names":[],"mappings":"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"}