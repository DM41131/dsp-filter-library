{"version":3,"file":"linkwitz-riley-filter.js","sources":["../src/linkwitz-riley-filter.js"],"sourcesContent":["// linkwitz-riley-filter.js — Linkwitz–Riley IIR design\n// Author: Davit Akobia <dav.akobia@gmail.com>\n// License: MIT\n\nimport { ButterworthFilter } from './butterworth-filter.js';\nimport { Util } from './utils.js';\n\n/**\n * A Linkwitz–Riley filter of order 2m is the cascade (squared magnitude)\n * of a Butterworth filter of order m at the same cutoff(s).\n * @typedef {\"lowpass\"|\"highpass\"|\"bandpass\"|\"bandstop\"} FilterKind\n */\nexport class LinkwitzRileyFilter {\n  /**\n   * @param {FilterKind} kind\n   * @param {number|number[]} cutoffHz\n   * @param {number} fs\n   * @param {number} orderEven even order (2,4,8,...). Common is 4.\n   */\n  static design(kind, cutoffHz, fs, orderEven = 4) {\n    if (orderEven % 2 !== 0) throw new Error('Linkwitz–Riley order must be even (e.g., 2, 4, 8)');\n    const halfOrder = orderEven / 2;\n    const base = ButterworthFilter.design(kind, cutoffHz, fs, halfOrder);\n    // Cascade the same filter with itself (square the transfer function)\n    const b = Util.polyMul(base.b, base.b);\n    const a = Util.polyMul(base.a, base.a);\n    // Normalize a[0] to 1\n    for (let i = 0; i < b.length; i++) b[i] /= a[0];\n    for (let i = 0; i < a.length; i++) a[i] /= a[0];\n    return { b, a, sections: [] };\n  }\n}\nexport default LinkwitzRileyFilter;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;AAKA;AACA;AACA;AACA;AACA;AACO,MAAM,mBAAmB,CAAC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,SAAS,GAAG,CAAC,EAAE;AACnD,IAAI,IAAI,SAAS,GAAG,CAAC,KAAK,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC;AACjG,IAAI,MAAM,SAAS,GAAG,SAAS,GAAG,CAAC;AACnC,IAAI,MAAM,IAAI,GAAG,iBAAiB,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,SAAS,CAAC;AACxE;AACA,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;AAC1C,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;AAC1C;AACA,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnD,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnD,IAAI,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE;AACjC,EAAE;AACF;;;;"}